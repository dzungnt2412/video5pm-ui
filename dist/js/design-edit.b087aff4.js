(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["design-edit"],{"34de":function(e,t,s){"use strict";var i=s("8827"),n=s.n(i);n.a},"4b68":function(e,t,s){"use strict";var i=s("2f62"),n=s("fb12");function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}t["a"]={data:function(){return{isVisibleCreateDesign:!1}},methods:r(r({},Object(i["b"])("design",[n["CREATE_DESIGN"]])),{},{handleVisibleCreateDesign:function(){this.isVisibleCreateDesign=!0},handleCreateDesignDesign:function(e){this.isVisibleCreateDesign=!1,this.$router.push({name:"design-edit",params:{id:e}})}})}},"6ad4":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isFetching?s("PageDetailLoading"):s("div",{staticClass:"page"},[s("div",{staticClass:"page-header pb-0"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("p-button",{staticClass:"btn-pure pl-0",attrs:{icon:"chevron-left"}},[s("router-link",{attrs:{to:{name:"design-list"}}},[e._v("Designs")])],1)],1)]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12  d-flex align-items-center justify-content-between mb-20"},[s("h4",[e._v("\n          Update Design\n          "),e.design&&!e.isChangeSku?s("span",[e._v("\n            : "+e._s(e.design.sku)+"\n            "),s("a",{attrs:{href:"#"},on:{click:function(t){e.isChangeSku=!e.isChangeSku}}},[s("p-icon",{attrs:{name:"edit",iconPack:"md"}})],1)]):e._e(),s("div",{staticStyle:{display:"inline-block"}},[e.design&&e.isChangeSku?s("div",{staticClass:"input-group input-group-sm"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.design.sku,expression:"design.sku"},{name:"validate",rawName:"v-validate",value:"required|min:3",expression:"'required|min:3'"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.design.sku},on:{input:function(t){t.target.composing||e.$set(e.design,"sku",t.target.value)}}}),s("div",{staticClass:"input-group-btn"},[s("p-button",{attrs:{type:"primary",disabled:e.isSaving,loading:e.isSaving||e.isLoading,size:"sm"},on:{click:e.handlerChangeSku}},[e._v("Ok")]),s("button",{staticClass:"btn btn-sm btn-danger",attrs:{loading:e.isLoading},on:{click:e.handlerCancelChangeSku}},[e._v("Cancel")])],1)]):e._e()])]),s("div",{staticClass:"page-header-group-actions__left"},[1==e.design.status||e.isChange?s("p-button",{staticClass:"ml-10",attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.handleCreateZipDesign(t)}}},[e._v("\n            Lựu lại\n          ")]):e._e(),s("p-button",{staticClass:"ml-10",attrs:{type:"danger"},on:{click:function(t){return t.preventDefault(),e.showConfirmDeleteDesign(t)}}},[e._v("\n            Xóa\n          ")])],1)])])]),s("div",{staticClass:"page-content container-fluid"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 col-md-8"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-block"},[s("div",{staticClass:"card-title"},[s("h4",[e._v("\n                Design Files\n              ")])]),e.isFetching?s("div",{staticClass:"text-center mb-50 mt-50"},[s("div",{staticClass:"loader vertical-align-middle loader-circle"})]):e.designFiles&&e.designFiles.length?s("div",{staticClass:"gallery row"},e._l(e.designFiles,(function(t,i){return s("div",{key:i,staticClass:"col-6 col-sm-4"},[s("div",{staticClass:"gallery-item"},[s("thumbnail",{attrs:{src:t.url}}),t.is_edit?e._e():[s("div",{staticClass:"gallery-item__actions"},[s("a",{staticClass:"ml-5",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.handleDownloadFile(t.id)}}},[s("p-icon",{attrs:{name:"download","icon-pack":"md"}})],1),s("a",{staticClass:"ml-5",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),e.showDeleteConfirmation(t)}}},[s("p-icon",{attrs:{name:"close","icon-pack":"md"},on:{click:function(s){return s.preventDefault(),e.showDeleteConfirmation(t)}}})],1)])]],2)])})),0):s("div",{staticClass:"text-center mt-40 mb-40"},[s("svg",{attrs:{width:"192",height:"135",viewBox:"0 0 192 128",xmlns:"http://www.w3.org/2000/svg"}},[s("g",{attrs:{fill:"none"}},[s("path",{attrs:{fill:"#E9EBED",d:"M138.049 43.407L95.873 33.248v79.494l42.176-11.04z"}}),s("path",{attrs:{fill:"#DFE0E2",d:"M53.696 43.407l42.177-10.159v79.494l-42.177-10.82z"}}),s("path",{attrs:{fill:"#F5F6F7",d:"M95.52 33.6l22.214-18.459 42.174 10.822-22.211 17.794z"}}),s("path",{attrs:{fill:"#E0E0E0",d:"M32.408 26.534l21.64 17.223 42.175-10.156-21.418-18.107z"}}),s("path",{attrs:{fill:"#EEF0F1",d:"M32.058 26.184l22.166 17.573L96.4 33.601 74.453 15.14z"}}),s("path",{attrs:{fill:"#E9EBED",d:"M53.696 43.407v58.516l42.177 10.819.569-58.074z"}}),s("path",{attrs:{fill:"#DFE0E2",d:"M138.049 101.702l-42.176 11.04V54.668l42.176-11.261z"}}),s("path",{attrs:{fill:"#000",opacity:".06",d:"M121.266 82.269v19.212l16.783-4.639v-19.21z"}}),s("path",{attrs:{fill:"#000",opacity:".04",d:"M53.145 73.769l23.627 5.962 18.991-15.458v-9.495L53.587 44.179z"}}),s("path",{attrs:{fill:"#000",opacity:".04",d:"M138.38 73.769l-23.628 5.962-18.989-15.458v-9.495l42.174-10.599z"}}),s("path",{attrs:{fill:"#F5F6F7",d:"M53.696 43.407L32.058 61.293l42.174 10.598 21.64-17.223z"}}),s("path",{attrs:{fill:"#E0E0E0",d:"M138.049 43.407l21.86 17.886-41.956 10.598-22.08-17.223z"}}),s("path",{attrs:{fill:"#EEF0F1",d:"M138.049 43.407l21.86 17.886-41.956 10.598-22.08-17.223z"}})])]),s("p",[e._v("\n                No design files have been uploaded yet\n              ")])])])])]),s("div",{staticClass:"col-12 col-md-4"},[s("section",{staticClass:"card"},[s("div",{staticClass:"card-block"},[s("div",{staticClass:"card-title"},[s("h4",[e._v("\n                Upload\n              ")])]),s("upload",{staticClass:"design-uploader",attrs:{action:e.createEndpoint("designs/"+e.$route.params.id+"/files"),drag:"",multiple:"","list-type":"picture",headers:e.uploadHeaders,"on-change":e.handleChangeFile,"on-success":e.handleSuccess,"max-file-size":1e8,"before-upload":e.beforeUpload}},[s("p-icon",{staticClass:"el-icon-upload",attrs:{name:"cloud-upload","icon-pack":"md"}}),s("div",{staticClass:"el-upload__text"},[e._v("\n                Drop file here or "),s("em",[e._v("click to upload")])])],1),s("div",{staticClass:"el-upload__tip"},[e._v("jpg/png files with a size less than 100mb")]),s("div",{staticClass:"gallery-list"},e._l(e.validFiles,(function(t,i){return s("div",{key:i,staticClass:"gallery-list__item"},[s("div",{staticClass:"gallery-list__item-top"},[s("div",{staticClass:"gallery-list__item-group"},[s("div",{staticClass:"gallery-list__item-group--thumbnail"},[t.url?s("img",{attrs:{src:t.url,alt:"Preview"}}):s("p-icon",{attrs:{name:"image","icon-pack":"md"}})],1),s("p",[e._v(e._s(t.name))])]),"fail"===t.status?s("div",{staticClass:"gallery-list__item-label"},[s("span",[e._v("Error")])]):e._e()]),t.percentage&&"fail"!==t.status?s("div",{staticClass:"gallery-list__item-bottom"},[s("p-progress",{attrs:{value:t.percentage,"show-value":"",format:"percent",type:"primary"}})],1):e._e()])})),0)],1)]),e.userInformation&&e.userInformation.length?s("section",{staticClass:"card"},[s("div",{staticClass:"card-block"},[s("div",{staticClass:"card-title"},[s("h4",[e._v("\n                User information\n              ")])]),s("p",{staticClass:"card-text"},e._l(e.userInformation,(function(t,i){return s("span",{key:i},[e._v("\n                "+e._s(t)+"\n                "),s("br")])})),0)])]):e._e()])])]),e.isVisibleCreateDesign?s("modal-create-design",{attrs:{visible:e.isVisibleCreateDesign,"create-design":e.createDesign},on:{"update:visible":function(t){e.isVisibleCreateDesign=t},created:e.handleCreateDesignDesign}}):e._e()],1)},n=[],a=s("a34a"),r=s.n(a),o=s("2f62"),c=s("7697"),l=s("f06d"),u=s("4b68"),d=s("5281"),h=s("54d7"),p=s("fb12"),f=s("def1"),g=s("45ba"),m=(s("7f4f"),s("5bad"),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("multiselect",{staticClass:"multiselect-custom",attrs:{options:e.products,placeholder:"Search product base","custom-label":e.customLabel},on:{"search-change":e.handleSearchProductTypes,select:e.handleSelect,remove:e.handleRemove},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[s("li",{staticClass:"multiselect__element",attrs:{slot:"beforeList"},slot:"beforeList"},[s("input",{staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.query}})])])}),v=[],b=s("b047c"),y=s.n(b),C=s("13ea"),w=s.n(C);function k(e,t,s,i,n,a,r){try{var o=e[a](r),c=o.value}catch(l){return void s(l)}o.done?t(c):Promise.resolve(c).then(i,n)}function _(e){return function(){var t=this,s=arguments;return new Promise((function(i,n){var a=e.apply(t,s);function r(e){k(a,i,n,r,o,"next",e)}function o(e){k(a,i,n,r,o,"throw",e)}r(void 0)}))}}var D={name:"ProductType",props:{value:{type:Object,default:function(){}},products:{type:Array,default:function(){return[]}}},computed:{validProducts:function(){var e=this;return this.query?this.products.filter((function(t){var s=t.name;return-1!==s.toLowerCase().indexOf(e.query.toLowerCase())})):this.products}},data:function(){return{query:"",selected:null}},mounted:function(){var e=this;if(this.value&&this.value.id&&this.products&&this.products.length){var t=this.products.find((function(t){var s=t.id;return s===e.value.id}));if(t){var s=Object.assign({},t);this.selected=w()(s)?null:s}}},methods:{handleSearchProductTypes:y()(_(r.a.mark((function e(){var t,s=arguments;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=s.length>0&&void 0!==s[0]?s[0]:"",this.query=t;case 2:case"end":return e.stop()}}),e,this)}))),500),handleSelect:function(e){this.$emit("input",e||{})},handleRemove:function(){this.$emit("input",{})},customLabel:function(e){return e?e.name:"Select product base"}}},x=D,S=s("2877"),E=Object(S["a"])(x,m,v,!1,null,null,null),O=E.exports,F=s("0681");function P(e,t,s,i,n,a,r){try{var o=e[a](r),c=o.value}catch(l){return void s(l)}o.done?t(c):Promise.resolve(c).then(i,n)}function j(e){return function(){var t=this,s=arguments;return new Promise((function(i,n){var a=e.apply(t,s);function r(e){P(a,i,n,r,o,"next",e)}function o(e){P(a,i,n,r,o,"throw",e)}r(void 0)}))}}function $(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,i)}return s}function L(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?$(Object(s),!0).forEach((function(t){I(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function I(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var T={name:"DesignForm",mixins:[c["a"],u["a"]],components:{Thumbnail:l["a"],Upload:d["b"],ModalCreateDesign:f["a"],ProductTypeResource:O},computed:L(L(L({},Object(o["d"])("design",{currentDesign:function(e){return e.design},currentDesignFiles:function(e){return e.design.design_files}})),Object(o["d"])("shared",{productBases:function(e){return e.productBases}})),{},{validFiles:function(){var e=this;return this.files.filter((function(t){var s=t.uid;return-1===e.uploadedIds.indexOf(s)}))},userInformation:function(){return this.design&&this.design.user?[this.design.user.full_name,this.design.user.username,this.design.user.email,this.design.user.phone].filter(Boolean):[]}}),data:function(){return{design:{sku:"",files:[]},productNames:{},files:[],preview:[],isFetching:!1,isSaving:!1,isChange:!1,uploadReady:!0,uploadedIds:[],isChangeSku:!1,changeProductIds:[],designFiles:[],isLoading:!1,showBtnSave:!1,disableUpload:!1}},mounted:function(){this.handleBeforeLeave()},methods:L(L({},Object(o["b"])("design",[p["FETCH_DESIGN"],p["UPDATE_DESIGN"],p["DELETE_DESIGN"],p["UPDATE_DESIGN_SKU"],p["DELETE_DESIGN_FILES"],p["DOWNLOAD_DESIGN"]])),{},{init:function(){var e=j(r.a.mark((function e(){return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.isFetching=!0,!this.$route.params.id){e.next=4;break}return e.next=4,this.getDesign();case 4:this.isFetching=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getDesign:function(){var e=j(r.a.mark((function e(){var t,s;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=parseInt(this.$route.params.id,10),e.next=3,this.fetchDesign(t);case 3:if(s=e.sent,this.isChange=!1,s.success){e.next=8;break}return this.$toast.open({type:"error",message:s.message}),e.abrupt("return");case 8:this.design=Object(g["d"])(this.currentDesign),this.designFiles=Object(g["d"])(this.currentDesign.design_files),this.designFiles.length&&(this.showBtnSave=!0);case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleSave:function(){var e=j(r.a.mark((function e(){var t,s;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isSaving=!0,t={id:this.design.id,body:{design_files:this.changeProductIds}},e.next=4,this.updateDesign(t);case 4:if(s=e.sent,this.isSaving=!1,s.success){e.next=9;break}return this.$toast.open({type:"error",message:s.message}),e.abrupt("return");case 9:this.$toast.open({type:"success",message:"Update design successful"}),this.isChange=!1,this.init();case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleDiscard:function(){},beforeUpload:function(){return this.designFiles.length>=h["c"]?(this.$toast.open({type:"error",message:"Design can not upload more than ".concat(h["c"]," file")}),this.disableUpload=!0,!1):(this.isChange=!0,!0)},handleChangeFile:function(e){if(!this.disableUpload){var t=this.files.findIndex((function(t){var s=t.uid;return s===e.uid}));-1===t?this.files.push(e):this.$set(this.files,t,e)}},handleSuccess:function(e,t){e&&"undefined"!==typeof e.design_file&&this.designFiles.push(e.design_file),this.showBtnSave=!0},showDeleteConfirmation:function(e){var t=this;this.$dialog.confirm({title:"Remove design file?",message:"Are you sure you want to remove this design file?",confirmText:"Remove",onConfirm:function(){return t.handleDelete(e)},type:"danger"})},handleDelete:function(){var e=j(r.a.mark((function e(t){var s,i;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isSaving=!0,s={id:t.id,design_id:t.design_id},e.next=4,this.deleteDesignFile(s);case 4:if(i=e.sent,this.isSaving=!1,i.success){e.next=9;break}return this.$toast.open({type:"error",message:i.message}),e.abrupt("return");case 9:this.isChange=!0,this.$toast.open({type:"success",message:"Delete design file successful"}),this.designFiles=this.designFiles.filter((function(e){return e!==t})),0===this.designFiles.length&&(this.showBtnSave=!1);case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleBeforeLeave:function(){window.onbeforeunload=function(){return this.isChange?"If you leave this page, all unsaved changes will be lost. Are you sure you want to leave this page?":null}.bind(this)},handlerChangeSku:function(){var e=j(r.a.mark((function e(){var t,s;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isSaving=!0,t={id:this.design.id,sku:this.design.sku},e.next=4,this.updateDesignSku(t);case 4:if(s=e.sent,this.isSaving=!1,s.success){e.next=9;break}return this.$toast.open({type:"error",message:s.message}),e.abrupt("return");case 9:this.isChangeSku=!1,this.$toast.open({type:"success",message:"Update design sku successful"});case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleDownloadFile:function(){var e=j(r.a.mark((function e(t){var s;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.isLoading=!0,s="".concat("https://api-stag.lionnix.com/v1","/designs/files/").concat(t,"/download?access_token=").concat(F["a"].getAccessToken()),window.open(s,"_self"),this.isLoading=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleCreateZipDesign:function(){var e=j(r.a.mark((function e(){var t,s;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isSaving=!0,t={id:this.design.id,sku:this.design.sku},e.next=4,this.updateDesignSku(t);case 4:if(s=e.sent,this.isSaving=!1,this.isChange=!1,s.success){e.next=10;break}return this.$toast.open({type:"error",message:"Update design failed !"}),e.abrupt("return");case 10:this.$toast.open({type:"success",message:"Update design success !"}),this.isChangeSku=!1,this.init();case 13:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handlerDeleteDesign:function(){var e=j(r.a.mark((function e(){var t,s;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(this.design.design_files&&this.design.design_files.length>0)){e.next=3;break}return this.$toast.open({type:"error",message:"Cant delete design contains the file"}),e.abrupt("return");case 3:return this.isSaving=!0,t={id:this.design.id},e.next=7,this.deleteDesign(t);case 7:if(s=e.sent,this.isSaving=!1,!s.success){e.next=13;break}return this.$toast.open("Delete design successful"),this.$router.push({name:"design-list"}),e.abrupt("return");case 13:this.$toast.open({type:"error",message:s.message});case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showConfirmDeleteDesign:function(){var e=this;this.$dialog.confirm({title:"Delete design?",message:"Are you sure you want to delete this design?",confirmText:"Delete",onConfirm:function(){return e.handlerDeleteDesign()},type:"danger"})},handlerCancelChangeSku:function(){this.isChangeSku=!1,this.design.sku=this.currentDesign.sku}}),watch:{"$route.params.id":{handler:function(){this.init()},immediate:!0}},beforeRouteLeave:function(e,t,s){this.isChange&&!window.confirm("If you leave this page, all unsaved changes will be lost. Are you sure you want to leave this page?")||s()}},N=T,U=(s("ec27"),s("34de"),Object(S["a"])(N,i,n,!1,null,"36dd4954",null));t["default"]=U.exports},7697:function(e,t,s){"use strict";var i=s("0681");t["a"]={computed:{uploadHeaders:function(){return{Authorization:"Bearer ".concat(i["a"].getAccessToken())}},uploadEndpoint:function(){return"".concat("https://api-stag.lionnix.com/v1","/uploads/images")},uploadFileEndpoint:function(){return"".concat("https://api-stag.lionnix.com/v1","/uploads/files")}},methods:{createEndpoint:function(e){return"".concat("https://api-stag.lionnix.com/v1","/").concat(e)}}}},8827:function(e,t,s){},db09:function(e,t,s){},def1:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p-modal",{attrs:{active:e.visible,title:"Tạo thư mục design mới"},on:{close:e.handleClose}},[s("div",{staticClass:"form-group",class:[{"has-success":!e.errors.has("sku")},{"has-danger":e.errors.has("sku")}]},[s("label",{staticClass:"form-control-label",attrs:{for:"sku"}},[e._v("\n      SKU\n    ")]),s("p-input",{directives:[{name:"validate",rawName:"v-validate",value:"required|alpha_dash|min:3",expression:"'required|alpha_dash|min:3'"}],attrs:{name:"sku",id:"sku"},model:{value:e.sku,callback:function(t){e.sku=t},expression:"sku"}}),e.errors.has("sku")?s("span",{staticClass:"invalid-feedback"},[e._v("\n      "+e._s(e.errors.first("sku"))+"\n    ")]):e._e()],1),s("template",{slot:"footer"},[s("p-button",{attrs:{type:"default",disable:e.loading},on:{click:e.handleClose}},[e._v("\n      Cancel\n    ")]),s("p-button",{attrs:{type:"primary",disable:e.loading},on:{click:e.handleCreateDesign}},[e._v("\n      Tạo\n    ")])],1)],2)},n=[],a=s("a34a"),r=s.n(a);function o(e,t,s,i,n,a,r){try{var o=e[a](r),c=o.value}catch(l){return void s(l)}o.done?t(c):Promise.resolve(c).then(i,n)}function c(e){return function(){var t=this,s=arguments;return new Promise((function(i,n){var a=e.apply(t,s);function r(e){o(a,i,n,r,c,"next",e)}function c(e){o(a,i,n,r,c,"throw",e)}r(void 0)}))}}var l={name:"ModalChangeDesign",props:{visible:{type:Boolean,default:!0},createDesign:{type:Function,default:function(){}}},data:function(){return{sku:"",loading:!1}},methods:{handleClose:function(){this.$emit("update:visible",!1)},handleCreateDesign:function(){var e=c(r.a.mark((function e(){var t,s;return r.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$validator.validateAll();case 2:if(t=e.sent,t){e.next=5;break}return e.abrupt("return");case 5:return this.loading=!0,e.next=8,this.createDesign({sku:this.sku});case 8:s=e.sent,this.loading=!1,s&&s.success?this.$emit("created",s.id):this.$toast.open({message:s.message,type:"error"});case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},u=l,d=s("2877"),h=Object(d["a"])(u,i,n,!1,null,null,null);t["a"]=h.exports},ec27:function(e,t,s){"use strict";var i=s("db09"),n=s.n(i);n.a},f06d:function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.image?s("img",e._b({class:e.className,attrs:{src:e.image,"data-src":e.src,alt:"Thumbnail"},on:{error:e.handleImageError}},"img",e.$attrs,!1)):e._e()},n=[],a=s("5bad"),r={name:"Thumbnail",props:{src:{type:String,default:""}},computed:{thumbnail:function(){return this.src?this.getThumbnailUrl(this.src):this.src}},data:function(){return{className:"",image:"",callAPi:!1}},methods:{handleImageError:function(){var e=this;if(this.image!==this.src){var t="".concat("https://static.lionnix.com/file-templates","/thumbnail.png");this.callAPi?this.image=t:(this.image="".concat("https://static.lionnix.com/file-templates","/image-processing.gif"),this.className="miss-thumbnail",this.src.startsWith("blob")||a["a"].missingThumbnail(this.src).then((function(s){e.className="",e.callAPi=!0,s&&s.success&&(s.url.length&&(e.image=s.url),e.image=t),e.showNotify()})).catch(this.showNotify))}},showNotify:function(){console.log("Miss thumbnail")},getThumbnailUrl:function(e){return"".concat("https://img-stag.lionnix.com/thumbnails","/").concat(e)}},watch:{src:{handler:function(e){e&&(this.image=this.thumbnail)},immediate:!0}}},o=r,c=s("2877"),l=Object(c["a"])(o,i,n,!1,null,null,null);t["a"]=l.exports}}]);