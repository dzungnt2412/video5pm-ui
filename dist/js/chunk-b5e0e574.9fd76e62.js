(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b5e0e574"],{2612:function(t,e,n){t.exports=n.p+"img/avatar-default.06c91d5e.svg"},"273e":function(t,e,n){},"2be3":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.notificationMessage?n("div",{staticClass:"noti-bar"},[n("div",{staticClass:"noti-bar-body",class:"noti-bar-"+t.notificationLabel},[n("div",[t._v(t._s(t.notificationMessage))]),n("div",{staticClass:"noti-bar-close",on:{click:function(e){return e.preventDefault(),t.closeNotiBar(e)}}},[n("p-icon",{attrs:{name:"close-circle-o",iconPack:"md"}})],1)])]):t._e()},a=[],o=n("2f62"),r=n("a7f7");function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var u={name:"Notibar",props:{},computed:c({},Object(o["d"])("shared",{notificationMessage:function(t){return t.notificationMessage},notificationLabel:function(t){return t.notificationLabel}})),methods:c(c({},Object(o["b"])("shared",[r["SHOW_NOTIFICATION_MESSAGE"]])),{},{closeNotiBar:function(){this.showNotificationMessage({})}}),watch:{notificationMessage:{handler:function(){var t=this;setTimeout((function(){t.showNotificationMessage({})}),3e3)},immediate:!1}}},d=u,p=n("2877"),f=Object(p["a"])(d,i,a,!1,null,null,null);e["a"]=f.exports},"3b36":function(t,e,n){},"4ffd":function(t,e,n){t.exports=n.p+"img/logo.3ac2f510.png"},"59af":function(t,e,n){"use strict";var i=n("273e"),a=n.n(i);a.a},6284:function(t,e,n){},"6cef":function(t,e,n){},"7b9b":function(t,e,n){},8114:function(t,e,n){var i,a,o;!function(n){var r=/iPhone/i,s=/iPod/i,c=/iPad/i,l=/\bAndroid(?:.+)Mobile\b/i,u=/Android/i,d=/\bAndroid(?:.+)SD4930UR\b/i,p=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,f=/Windows Phone/i,b=/\bWindows(?:.+)ARM\b/i,h=/BlackBerry/i,v=/BB10/i,m=/Opera Mini/i,g=/\b(CriOS|Chrome)(?:.+)Mobile/i,w=/Mobile(?:.+)Firefox\b/i;function O(t,e){return t.test(e)}function y(t){var e=t||("undefined"!=typeof navigator?navigator.userAgent:""),n=e.split("[FBAN");void 0!==n[1]&&(e=n[0]),void 0!==(n=e.split("Twitter"))[1]&&(e=n[0]);var i={apple:{phone:O(r,e)&&!O(f,e),ipod:O(s,e),tablet:!O(r,e)&&O(c,e)&&!O(f,e),device:(O(r,e)||O(s,e)||O(c,e))&&!O(f,e)},amazon:{phone:O(d,e),tablet:!O(d,e)&&O(p,e),device:O(d,e)||O(p,e)},android:{phone:!O(f,e)&&O(d,e)||!O(f,e)&&O(l,e),tablet:!O(f,e)&&!O(d,e)&&!O(l,e)&&(O(p,e)||O(u,e)),device:!O(f,e)&&(O(d,e)||O(p,e)||O(l,e)||O(u,e))||O(/\bokhttp\b/i,e)},windows:{phone:O(f,e),tablet:O(b,e),device:O(f,e)||O(b,e)},other:{blackberry:O(h,e),blackberry10:O(v,e),opera:O(m,e),firefox:O(w,e),chrome:O(g,e),device:O(h,e)||O(v,e)||O(m,e)||O(w,e)||O(g,e)}};return i.any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}t.exports&&"undefined"==typeof window?t.exports=y:t.exports&&"undefined"!=typeof window?(t.exports=y(),t.exports.isMobile=y):(a=[],i=n.isMobile=y(),o="function"===typeof i?i.apply(e,a):i,void 0===o||(t.exports=o))}(this)},"82d7":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"animsition dashboard",class:{"site-menubar-unfold":t.isSidebarOpen,"site-menubar-hide":!t.isSidebarOpen}},[n("p-noti"),n("p-header",{attrs:{shop:t.shop,shops:t.shops,isSidebarOpen:t.isSidebarOpen},on:{selectShop:t.handleSelectShop,toggleShowSidebar:t.toggleShowSidebar}}),n("p-sidebar",{attrs:{isSidebarOpen:t.isSidebarOpen}}),n("router-view",{key:t.$route.name})],1)},a=[],o=n("a34a"),r=n.n(o),s=n("8114"),c=n.n(s),l=n("2f62"),u=n("b60e"),d=(n("6cef"),n("7b9b"),n("6284"),n("a99a"),n("3b36"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("nav",{staticClass:"site-navbar navbar navbar-default navbar-fixed-top navbar-mega navbar-inverse bg-indigo-600",attrs:{role:"navigation"}},[i("div",{staticClass:"navbar-header"},[i("button",{staticClass:"navbar-toggler hamburger hamburger-close navbar-toggler-left",class:{hided:!t.isSidebarOpen},attrs:{type:"button","data-toggle":"menubar"},on:{click:function(e){return e.preventDefault(),t.toggleShowSidebar(e)}}},[i("span",{staticClass:"sr-only"},[t._v("Toggle navigation")]),i("span",{staticClass:"hamburger-bar"})]),i("button",{staticClass:"navbar-toggler collapsed",attrs:{type:"button","data-target":"#site-navbar-collapse","data-toggle":"collapse"},on:{click:function(e){return e.preventDefault(),t.toggleShowNavbar(e)}}},[i("i",{staticClass:"icon wb-more-horizontal",attrs:{"aria-hidden":"true"}})]),i("div",{staticClass:"navbar-brand navbar-brand-center"},[i("router-link",{attrs:{to:"/"}},[i("img",{staticClass:"navbar-brand-logo",attrs:{src:n("4ffd"),title:"Remark",alt:"Lionnix"}}),i("span",{staticClass:"navbar-brand-text hidden-xs-down"},[t._v("Video5m")])])],1)]),i("div",{staticClass:"navbar-container container-fluid"},[i("div",{staticClass:"navbar-collapse navbar-collapse-toolbar collapse",class:{show:t.isShowNavbarOnMobile}},[i("ul",{staticClass:"nav navbar-toolbar"},[i("li",{staticClass:"nav-item hidden-float"},[i("a",{staticClass:"nav-link",attrs:{href:"#","data-toggle":"menubar"},on:{click:function(e){return e.preventDefault(),t.toggleShowSidebar(e)}}},[i("i",{staticClass:"icon hamburger hamburger-arrow-left unfolded",class:{hided:!t.isSidebarOpen}},[i("span",{staticClass:"sr-only"},[t._v("Toggle menubar")]),i("span",{staticClass:"hamburger-bar"})])])]),t.shop&&t.shop.id?i("li",{staticClass:"nav-item"},[i("div",{staticClass:"nav-link disabled"},[t._v(t._s(t.shop&&t.shop.name?t.shop.name:""))])]):t._e()]),i("ul",{staticClass:"nav navbar-toolbar navbar-right navbar-toolbar-right"},[i("li",{staticClass:"nav-item dropdown notifications"},[i("p-dropdown",{attrs:{dropdownClass:"dropdown-menu-right dropdown-menu-media"},on:{"on-open":t.onOpenDropdownNotifi}},[i("a",{staticClass:"nav-link navbar-avatar",attrs:{slot:"trigger",title:"Notifications"},slot:"trigger"},[i("i",{staticClass:"icon wb-bell",attrs:{"aria-hidden":"true"}}),i("span",{staticClass:"badge badge-pill badge-danger up"},[t._v(t._s(t.countNotiUnread))])]),i("div",{staticClass:"dropdown-menu-header"},[i("h5",[t._v("Thông báo")]),t.notifications.length?i("span",{staticClass:"badge badge-round badge-danger"},[t._v("New "+t._s(t.countNotiUnread))]):t._e()]),i("div",{staticClass:"list-group custome-scroll-y",on:{"&scroll":function(e){return t.scrollHandler(e)}}},[i("div",{attrs:{"data-role":"container"}},[i("div",{attrs:{"data-role":"content"}},t._l(t.notifications,(function(e,n){return i("a",{key:n,staticClass:"list-group-item dropdown-item",class:e.status},[i("div",{staticClass:"media"},[i("div",{staticClass:"pr-10"},[i("i",{staticClass:"icon wb-order bg-red-600 white icon-circle",attrs:{"aria-hidden":"true"}})]),i("div",{staticClass:"media-body"},[i("h6",{staticClass:"media-heading"},[t._v(t._s(e.title))]),"export"===e.type||"export_fullfill"===e.type?i("p",{on:{click:function(n){return t.downloadFile(e.message,e.type)}}},[t._v("Cick To Download")]):i("p",{domProps:{innerHTML:t._s(e.message)}}),i("time",{staticClass:"media-meta"},[t._v(t._s(t._f("datetime")(e.created_at)))])])])])})),0)])]),i("div",{staticClass:"dropdown-menu-footer"},[i("a",{staticClass:"dropdown-menu-footer-btn",attrs:{href:"javascript:void(0)",role:"button"}},[i("i",{staticClass:"icon wb-settings",attrs:{"aria-hidden":"true"}})]),i("a",{staticClass:"dropdown-item",attrs:{href:"javascript:void(0)",role:"menuitem"}},[t._v("Tất cả thông báo")])])])],1),t.shops&&t.shops.length?i("li",{staticClass:"nav-item dropdown"},[i("p-dropdown",[t.validShops.length>0?i("a",{staticClass:"nav-link navbar-avatar pointer dropdown-toggle",style:{"line-height":"30px"},attrs:{slot:"trigger"},slot:"trigger"},[t._v("Chọn shop")]):t._e(),t._l(t.validShops,(function(e,n){return i("p-dropdown-item",{key:n,on:{click:function(n){return t.handleSelectShop(e)}}},[t._v(t._s(e.name))])}))],2)],1):t._e(),i("li",{staticClass:"nav-item dropdown"},[i("p-dropdown",[i("a",{staticClass:"nav-link navbar-avatar pointer",attrs:{slot:"trigger"},slot:"trigger"},[i("span",{staticClass:"avatar"},[i("img",{attrs:{src:n("2612"),alt:"..."}})])]),i("p-dropdown-item",{staticClass:"clearfix"},[i("router-link",{style:{color:"inherit"},attrs:{to:{name:"shop-add"}}},[i("p-icon",{attrs:{name:"store","icon-pack":"md"}}),t._v("Thêm shop mới\n              ")],1)],1),i("p-dropdown-item",{staticClass:"clearfix"},[i("router-link",{style:{color:"inherit"},attrs:{to:{name:"change-profile"}}},[i("p-icon",{attrs:{name:"account-o","icon-pack":"md"}}),t._v("Sửa thông tin\n                tài khoản\n              ")],1)],1),i("p-dropdown-item",{staticClass:"clearfix"},[i("router-link",{style:{color:"inherit"},attrs:{to:{name:"change-password"}}},[i("p-icon",{attrs:{name:"key","icon-pack":"md"}}),t._v("Đổi mật khẩu\n              ")],1)],1),i("p-dropdown-item",{staticClass:"clearfix"},[i("router-link",{style:{color:"inherit"},attrs:{to:"/logout"}},[i("p-icon",{attrs:{name:"lock-open","icon-pack":"md"}}),t._v("Đăng xuất\n              ")],1)],1)],1)],1)])])])])}),p=[],f=n("c4e1"),b=n("7f4f"),h=n("0681"),v={conn:null,connect:function(t){var e=this;return window["WebSocket"]?(this.conn=new WebSocket("wss://ws.lionnix.com/ws"),this.onOpen(),this.onMessage((function(e){t(e)})),this.onclose((function(){setTimeout((function(){e.connect(t)}),3e3)})),this):this},onOpen:function(){var t=this,e=h["a"].getAccessToken();e&&this.conn.addEventListener("open",(function(){t.conn.send(JSON.stringify({type:"connect",token:e}))}))},onclose:function(t){this.conn.onclose=function(e){console.log("web socket is disconnected"),t(e)}},onSend:function(t){t&&this.conn&&this.conn.send(t)},onMessage:function(t){this.conn.addEventListener("message",(function(e){t(e)}))},onEvent:function(t,e){this.conn.addEventListener(t,(function(t){e(t)}))}},m=v,g=n("21cb"),w=n("a7f7");function O(t,e,n,i,a,o,r){try{var s=t[o](r),c=s.value}catch(l){return void n(l)}s.done?e(c):Promise.resolve(c).then(i,a)}function y(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var o=t.apply(e,n);function r(t){O(o,i,a,r,s,"next",t)}function s(t){O(o,i,a,r,s,"throw",t)}r(void 0)}))}}function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){_(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var k={name:"Header",props:{shop:{type:Object,default:function(){}},shops:{type:Array,default:function(){return[]}},isSidebarOpen:{type:Boolean,default:!0}},created:function(){var t=this;m.connect((function(e){var n=JSON.parse(e.data);t.pushNotification(n)})),this.init()},data:function(){return{isFetchNotity:!1,isShowNavbarOnMobile:!1,socket:null}},computed:S(S({},Object(l["d"])("shared",{notifications:function(t){return t.notifications},countNoti:function(t){return t.countNoti},countNotiUnread:function(t){return t.countNotiUnread}})),{},{validShops:function(){var t=this;return this.shop&&this.shops?this.shops.filter((function(e){var n=e.id;return n!==t.shop.id})):[]}}),methods:S(S(S({},Object(l["b"])("shared",[w["FETCH_NOTIFICATIONS"],w["COUNT_NOTIFICATIONS"],w["COUNT_NOTIFICATIONS_UNREAD"],w["READ_NOTIFICATIONS"]])),Object(l["c"])("shared",[w["PUSH_NOTIFICATION"]])),{},{scrollHandler:function(){var t=y(r.a.mark((function t(e){var n,i,a;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.target,i=this.notifications.length,!(this.countNoti<=i)){t.next=4;break}return t.abrupt("return");case 4:if(!this.isFetchNotity){t.next=6;break}return t.abrupt("return");case 6:if(this.isFetchNotity=!0,n.scrollHeight-n.scrollTop!==n.clientHeight){t.next=13;break}return a=this.notifications[i-1],t.next=11,this.fetchNotifications({limit:10,last_id:a.id});case 11:return t.next=13,this.readNotifications();case 13:this.isFetchNotity=!1;case 14:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),init:function(){var t=y(r.a.mark((function t(){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.fetchNotifications({limit:10}),this.countNotifications(),this.countNotificationsUnread({status:"unread"})]);case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleSelectShop:function(t){this.$emit("selectShop",t)},toggleShowSidebar:function(){this.$emit("toggleShowSidebar")},toggleShowNavbar:function(){this.isShowNavbarOnMobile=!this.isShowNavbarOnMobile},downloadFile:function(){var t=y(r.a.mark((function t(e,n){var i,a,o,s;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return"export"===n?i=g["d"]:"export_fullfill"===n&&(i=g["b"]),a=e.split("/"),a.shift(),o=a.join("_"),t.next=6,f["a"].get("/uploads/file-export/download?type=".concat(i,"&url=").concat(e),{type:"blob"});case 6:s=t.sent;try{b["a"].downloadBlob(s,"".concat(o,".csv"))}catch(r){this.$toast.open({type:"error",message:"File error !!!"})}case 8:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}(),onOpenDropdownNotifi:function(){var t=y(r.a.mark((function t(e){return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=3;break}return t.next=3,this.readNotifications();case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()})},j=k,N=(n("59af"),n("2877")),x=Object(N["a"])(j,d,p,!1,null,"a8c2ff2a",null),P=x.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"site-menubar site-menubar-light"},[n("div",{staticClass:"site-menubar-body"},[n("ul",{staticClass:"site-menu"},t._l(t.availableMenus,(function(e,i){return n("li",{key:i,staticClass:"site-menu-item has-sub",class:{active:t.isActive(e.route),hover:t.hoverIndex===i,open:t.isActive(e.route)&&e.sub},on:{mouseover:function(e){return t.onHover(i)},mouseout:function(e){return t.onHover(-1)}}},[n("router-link",{attrs:{to:e.route}},[n("i",{staticClass:"site-menu-icon",class:"wb-"+e.icon}),n("span",{staticClass:"site-menu-title"},[t._v(t._s(e.title))])]),e.sub?n("ul",{staticClass:"site-menu-sub"},t._l(e.sub,(function(e,i){return n("li",{key:i,staticClass:"site-menu-item"},[n("router-link",{staticClass:"animsition-link",attrs:{to:e.route}},[n("span",{staticClass:"site-menu-title"},[t._v(t._s(e.title))])])],1)})),0):t._e()],1)})),0)])])},M=[],A=n("e305"),D={name:"Sidebar",props:{isSidebarOpen:{type:Boolean,default:!0}},computed:{menus:function(){return[{title:"Home",icon:"dashboard",route:"/"},{title:"Create video",icon:"image",route:{name:"create-video"}},{title:"My video",icon:"report",route:{name:"order-list"}},{title:"Pricing",icon:"payment",route:{name:"design-list"}}]},availableMenus:function(){return this.menus.filter((function(t){return!0!==t.disable}))}},data:function(){return{hoverIndex:-1}},methods:{isActive:function(t){return Object(A["b"])(t)?this.$route.name===t.name:this.$route.path===t||this.$route.fullPath===t},onHover:function(t){this.hoverIndex=t}}},E=D,I=Object(N["a"])(E,T,M,!1,null,null,null),F=I.exports,H=n("2be3");function $(t,e,n,i,a,o,r){try{var s=t[o](r),c=s.value}catch(l){return void n(l)}s.done?e(c):Promise.resolve(c).then(i,a)}function L(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){var o=t.apply(e,n);function r(t){$(o,i,a,r,s,"next",t)}function s(t){$(o,i,a,r,s,"throw",t)}r(void 0)}))}}function B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function U(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?B(Object(n),!0).forEach((function(e){R(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function R(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var W={name:"Version2",components:{PHeader:P,PSidebar:F,PNoti:H["a"]},computed:U(U({},Object(l["d"])("shop",{shop:function(t){return t.shop},shops:function(t){return t.shops}})),Object(l["d"])("shared",{notificationMessage:function(t){return t.notificationMessage},notificationLabel:function(t){return t.notificationLabel}})),data:function(){return{isSidebarOpen:!0}},mounted:function(){c.a.phone&&(this.isSidebarOpen=!1)},methods:U(U({},Object(l["b"])("shop",[u["SELECT_SHOP"]])),{},{toggleShowSidebar:function(){this.isSidebarOpen=!this.isSidebarOpen},handleSelectShop:function(){var t=L(r.a.mark((function t(e){var n;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.selectShop({id:e.id});case 2:if(n=t.sent,n.success){t.next=6;break}return this.$toast.open({type:"error",message:n.message}),t.abrupt("return");case 6:this.$toast.open("Chọn shop ".concat(e.name," thành công")),"dashboard"===this.$route.name?setTimeout((function(){location.reload()}),500):this.$router.push("/");case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()})},J=W,z=Object(N["a"])(J,i,a,!1,null,null,null);e["default"]=z.exports},a99a:function(t,e,n){}}]);