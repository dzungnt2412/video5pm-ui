{"remainingRequest":"/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/tiendzung/workspace/video5pm/video5pm-ui/src/components/shared/Thumbnail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/tiendzung/workspace/video5pm/video5pm-ui/src/components/shared/Thumbnail.vue","mtime":1603898990376},{"path":"/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/cache-loader/dist/cjs.js","mtime":1601450297498},{"path":"/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/babel-loader/lib/index.js","mtime":1597736171393},{"path":"/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/cache-loader/dist/cjs.js","mtime":1601450297498},{"path":"/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/vue-loader/lib/index.js","mtime":1597736282333}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport api from '@/packages/design/api'\nexport default {\n  name: 'Thumbnail',\n  props: {\n    src: {\n      type: String,\n      default: '',\n    },\n  },\n  computed: {\n    thumbnail() {\n      if (this.src) {\n        return this.getThumbnailUrl(this.src)\n      }\n\n      return this.src\n    },\n  },\n  data() {\n    return {\n      className: '',\n      image: '',\n      callAPi: false,\n    }\n  },\n  methods: {\n    handleImageError() {\n      if (this.image === this.src) {\n        return\n      }\n\n      const thumbnailDefault = `${process.env.VUE_APP_ASSETS}/thumbnail.png`\n\n      if (this.callAPi) {\n        this.image = thumbnailDefault\n        return\n      }\n\n      this.image = `${process.env.VUE_APP_ASSETS}/image-processing.gif`\n      this.className = 'miss-thumbnail'\n\n      if (this.src.startsWith('blob')) {\n        return\n      }\n\n      api\n        .missingThumbnail(this.src)\n        .then((response) => {\n          this.className = ''\n          this.callAPi = true\n          if (response && response.success) {\n            if (response.url.length) {\n              this.image = response.url\n            }\n            this.image = thumbnailDefault\n          }\n          this.showNotify()\n        })\n        .catch(this.showNotify)\n    },\n\n    showNotify() {\n      console.log('Miss thumbnail')\n    },\n\n    getThumbnailUrl(src) {\n      return `${process.env.VUE_APP_BASE_IMAGE_URL}/${src}`\n    },\n  },\n  watch: {\n    src: {\n      handler(val) {\n        if (val) {\n          this.image = this.thumbnail\n        }\n      },\n      immediate: true,\n    },\n  },\n}\n",{"version":3,"sources":["Thumbnail.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Thumbnail.vue","sourceRoot":"src/components/shared","sourcesContent":["<template>\n  <img\n    :src=\"image\"\n    :data-src=\"src\"\n    :class=\"className\"\n    v-if=\"image\"\n    alt=\"Thumbnail\"\n    @error=\"handleImageError\"\n    v-bind=\"$attrs\"\n  />\n</template>\n\n<script>\nimport api from '@/packages/design/api'\nexport default {\n  name: 'Thumbnail',\n  props: {\n    src: {\n      type: String,\n      default: '',\n    },\n  },\n  computed: {\n    thumbnail() {\n      if (this.src) {\n        return this.getThumbnailUrl(this.src)\n      }\n\n      return this.src\n    },\n  },\n  data() {\n    return {\n      className: '',\n      image: '',\n      callAPi: false,\n    }\n  },\n  methods: {\n    handleImageError() {\n      if (this.image === this.src) {\n        return\n      }\n\n      const thumbnailDefault = `${process.env.VUE_APP_ASSETS}/thumbnail.png`\n\n      if (this.callAPi) {\n        this.image = thumbnailDefault\n        return\n      }\n\n      this.image = `${process.env.VUE_APP_ASSETS}/image-processing.gif`\n      this.className = 'miss-thumbnail'\n\n      if (this.src.startsWith('blob')) {\n        return\n      }\n\n      api\n        .missingThumbnail(this.src)\n        .then((response) => {\n          this.className = ''\n          this.callAPi = true\n          if (response && response.success) {\n            if (response.url.length) {\n              this.image = response.url\n            }\n            this.image = thumbnailDefault\n          }\n          this.showNotify()\n        })\n        .catch(this.showNotify)\n    },\n\n    showNotify() {\n      console.log('Miss thumbnail')\n    },\n\n    getThumbnailUrl(src) {\n      return `${process.env.VUE_APP_BASE_IMAGE_URL}/${src}`\n    },\n  },\n  watch: {\n    src: {\n      handler(val) {\n        if (val) {\n          this.image = this.thumbnail\n        }\n      },\n      immediate: true,\n    },\n  },\n}\n</script>\n"]}]}