{"remainingRequest":"/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/tiendzung/workspace/video5pm/video5pm-ui/src/packages/container/views/components/ModalChangeDesign.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/tiendzung/workspace/video5pm/video5pm-ui/src/packages/container/views/components/ModalChangeDesign.vue","mtime":1604479001985},{"path":"/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/cache-loader/dist/cjs.js","mtime":1604479000133},{"path":"/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/thread-loader/dist/cjs.js","mtime":1604479001701},{"path":"/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/babel-loader/lib/index.js","mtime":1604479000077},{"path":"/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/cache-loader/dist/cjs.js","mtime":1604479000133},{"path":"/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/vue-loader/lib/index.js","mtime":1604479001773}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport debounce from 'lodash/debounce'\nimport Thumbnail from '@components/shared/Thumbnail'\n\nexport default {\n  name: 'ModalChangeDesign',\n  components: { Thumbnail },\n  props: {\n    visible: {\n      type: Boolean,\n      default: false,\n    },\n    designs: {\n      type: Array,\n      default: () => [],\n    },\n    fetchDesigns: {\n      type: Function,\n      default: () => {},\n    },\n    shopId: {\n      type: Number,\n      default: 0,\n    },\n    sku: {\n      type: String,\n      default: '',\n    },\n  },\n  computed: {\n    isSelected() {\n      return this.design && this.design.id\n    },\n    imagePlaceholder() {\n      return require('@assets/img/image-placeholder.png')\n    },\n  },\n  data() {\n    return {\n      isFetching: false,\n      query: '',\n      items: [],\n      currentPage: 1,\n      design: {},\n    }\n  },\n  mounted() {\n    this.init()\n  },\n  methods: {\n    init() {\n      if (this.designs && this.designs.length) {\n        this.items = this.designs.slice()\n      } else {\n        this.handleFetchDesigns()\n      }\n    },\n\n    handleClose() {\n      this.$emit('update:visible', false)\n    },\n\n    handleSelectItem(item) {\n      this.design = item\n    },\n\n    handleSelectDesign(design_file) {\n      this.$emit('selected', { url: design_file.url, design: this.design })\n    },\n\n    async handleFetchDesigns() {\n      const payload = {\n        search: this.query,\n        page: this.currentPage,\n      }\n\n      const response = await this.fetchDesigns(payload)\n      if (response.success) {\n        this.items.push(...response.items)\n      }\n    },\n\n    onQueryChange: debounce(function() {\n      this.currentPage = 1\n      this.items = []\n      this.handleFetchDesigns()\n    }, 500),\n\n    handleCloseDesign() {\n      this.design = {}\n    },\n  },\n  watch: {\n    sku: {\n      handler: function(val) {\n        this.query = val\n      },\n      deep: true,\n      immediate: true,\n    },\n  },\n}\n",null]}