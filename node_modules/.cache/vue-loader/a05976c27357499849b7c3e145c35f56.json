{"remainingRequest":"/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/tiendzung/workspace/video5pm/video5pm-ui/src/packages/container/views/components/ModalChangeDesign.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/tiendzung/workspace/video5pm/video5pm-ui/src/packages/container/views/components/ModalChangeDesign.vue","mtime":1603898990380},{"path":"/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/cache-loader/dist/cjs.js","mtime":1601450297498},{"path":"/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/babel-loader/lib/index.js","mtime":1597736171393},{"path":"/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/cache-loader/dist/cjs.js","mtime":1601450297498},{"path":"/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/vue-loader/lib/index.js","mtime":1597736282333}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport debounce from 'lodash/debounce'\nimport Thumbnail from '@components/shared/Thumbnail'\n\nexport default {\n  name: 'ModalChangeDesign',\n  components: { Thumbnail },\n  props: {\n    visible: {\n      type: Boolean,\n      default: false,\n    },\n    designs: {\n      type: Array,\n      default: () => [],\n    },\n    fetchDesigns: {\n      type: Function,\n      default: () => {},\n    },\n    shopId: {\n      type: Number,\n      default: 0,\n    },\n    sku: {\n      type: String,\n      default: '',\n    },\n  },\n  computed: {\n    isSelected() {\n      return this.design && this.design.id\n    },\n    imagePlaceholder() {\n      return require('@assets/img/image-placeholder.png')\n    },\n  },\n  data() {\n    return {\n      isFetching: false,\n      query: '',\n      items: [],\n      currentPage: 1,\n      design: {},\n    }\n  },\n  mounted() {\n    this.init()\n  },\n  methods: {\n    init() {\n      if (this.designs && this.designs.length) {\n        this.items = this.designs.slice()\n      } else {\n        this.handleFetchDesigns()\n      }\n    },\n\n    handleClose() {\n      this.$emit('update:visible', false)\n    },\n\n    handleSelectItem(item) {\n      this.design = item\n    },\n\n    handleSelectDesign(design_file) {\n      this.$emit('selected', { url: design_file.url, design: this.design })\n    },\n\n    async handleFetchDesigns() {\n      const payload = {\n        search: this.query,\n        page: this.currentPage,\n      }\n\n      const response = await this.fetchDesigns(payload)\n      if (response.success) {\n        this.items.push(...response.items)\n      }\n    },\n\n    onQueryChange: debounce(function() {\n      this.currentPage = 1\n      this.items = []\n      this.handleFetchDesigns()\n    }, 500),\n\n    handleCloseDesign() {\n      this.design = {}\n    },\n  },\n  watch: {\n    sku: {\n      handler: function(val) {\n        this.query = val\n      },\n      deep: true,\n      immediate: true,\n    },\n  },\n}\n",{"version":3,"sources":["ModalChangeDesign.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ModalChangeDesign.vue","sourceRoot":"src/packages/container/views/components","sourcesContent":["<template>\n  <p-modal\n    :active=\"visible\"\n    :title=\"design && design.id ? 'Choose image' : 'Choose design'\"\n    @close=\"handleClose\"\n  >\n    <template v-if=\"!isSelected\">\n      <div class=\"form-group\">\n        <label class=\"form-control-label\">\n          Search by SKU\n        </label>\n        <p-input v-model=\"query\" @input=\"onQueryChange\" id=\"search-design\">\n        </p-input>\n      </div>\n      <ul\n        class=\"list-group list-group-dividered list-group-full list-select-design\"\n      >\n        <li\n          class=\"list-group-item\"\n          v-for=\"(item, index) in items\"\n          :key=\"index\"\n          @click.prevent=\"handleSelectItem(item)\"\n        >\n          <div class=\"media\">\n            <div class=\"pr-20\">\n              <thumbnail\n                class=\"w-50\"\n                :src=\"item.design_files[0].url\"\n                v-if=\"item.design_files && item.design_files.length\"\n              />\n              <img :src=\"imagePlaceholder\" v-else class=\"w-50\" />\n            </div>\n            <div class=\"media-body\">\n              <div class=\"float-right\">\n                <p-button @click.prevent=\"handleSelectItem(item)\">\n                  Select\n                </p-button>\n              </div>\n              {{ item.sku }}\n            </div>\n          </div>\n        </li>\n      </ul>\n    </template>\n    <template v-else>\n      <p-button\n        class=\"pl-0 mb-10 no-hover\"\n        flat\n        icon=\"chevron-left\"\n        @click.prevent=\"handleCloseDesign\"\n      >\n        Back\n      </p-button>\n\n      <ul class=\"blocks blocks-100 blocks-xxl-4 blocks-lg-3 blocks-md-2\">\n        <li\n          class=\"pointer\"\n          v-for=\"(file, i) in design.design_files\"\n          :key=\"i\"\n          @click=\"handleSelectDesign(file)\"\n        >\n          <div class=\"card card-shadow\">\n            <figure class=\"card-img-top overlay-hover overlay\">\n              <thumbnail :src=\"file.url\" />\n            </figure>\n          </div>\n        </li>\n      </ul>\n    </template>\n  </p-modal>\n</template>\n\n<script>\nimport debounce from 'lodash/debounce'\nimport Thumbnail from '@components/shared/Thumbnail'\n\nexport default {\n  name: 'ModalChangeDesign',\n  components: { Thumbnail },\n  props: {\n    visible: {\n      type: Boolean,\n      default: false,\n    },\n    designs: {\n      type: Array,\n      default: () => [],\n    },\n    fetchDesigns: {\n      type: Function,\n      default: () => {},\n    },\n    shopId: {\n      type: Number,\n      default: 0,\n    },\n    sku: {\n      type: String,\n      default: '',\n    },\n  },\n  computed: {\n    isSelected() {\n      return this.design && this.design.id\n    },\n    imagePlaceholder() {\n      return require('@assets/img/image-placeholder.png')\n    },\n  },\n  data() {\n    return {\n      isFetching: false,\n      query: '',\n      items: [],\n      currentPage: 1,\n      design: {},\n    }\n  },\n  mounted() {\n    this.init()\n  },\n  methods: {\n    init() {\n      if (this.designs && this.designs.length) {\n        this.items = this.designs.slice()\n      } else {\n        this.handleFetchDesigns()\n      }\n    },\n\n    handleClose() {\n      this.$emit('update:visible', false)\n    },\n\n    handleSelectItem(item) {\n      this.design = item\n    },\n\n    handleSelectDesign(design_file) {\n      this.$emit('selected', { url: design_file.url, design: this.design })\n    },\n\n    async handleFetchDesigns() {\n      const payload = {\n        search: this.query,\n        page: this.currentPage,\n      }\n\n      const response = await this.fetchDesigns(payload)\n      if (response.success) {\n        this.items.push(...response.items)\n      }\n    },\n\n    onQueryChange: debounce(function() {\n      this.currentPage = 1\n      this.items = []\n      this.handleFetchDesigns()\n    }, 500),\n\n    handleCloseDesign() {\n      this.design = {}\n    },\n  },\n  watch: {\n    sku: {\n      handler: function(val) {\n        this.query = val\n      },\n      deep: true,\n      immediate: true,\n    },\n  },\n}\n</script>\n<style scoped>\n.list-select-design .list-group-item {\n  cursor: pointer;\n}\n.list-select-design .list-group-item:hover {\n  color: #000;\n}\n</style>\n"]}]}