{"remainingRequest":"/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/tiendzung/workspace/video5pm/video5pm-ui/src/packages/user/views/ChangeProfile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/tiendzung/workspace/video5pm/video5pm-ui/src/packages/user/views/ChangeProfile.vue","mtime":1604479001993},{"path":"/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/babel-loader/lib/index.js","mtime":1604479000077},{"path":"/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/cache-loader/dist/cjs.js","mtime":1604479000133},{"path":"/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/vue-loader/lib/index.js","mtime":1604479001773}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapState, mapActions } from 'vuex'\nimport { CHANGE_PASSWORD, CHANGE_PROFILE, FETCH_PROFILE } from '../store'\n\nexport default {\n  name: 'ChangeProfile',\n  computed: {\n    ...mapState('user', {\n      current: (state) => state.current,\n    }),\n  },\n  data() {\n    return {\n      profile: {\n        full_name: '',\n        phone_number: '',\n        facebook: '',\n      },\n      password: {\n        current_password: '',\n        new_password: '',\n        confirm_password: '',\n      },\n      isChanging: false,\n      isProfileFetching: false,\n      resultProfileFetch: {},\n    }\n  },\n  mounted() {\n    this.handleFetchShop()\n  },\n  methods: {\n    ...mapActions('user', [FETCH_PROFILE, CHANGE_PROFILE, CHANGE_PASSWORD]),\n\n    async handleFetchShop() {\n      this.isProfileFetching = true\n      this.resultProfileFetch = await this.fetchProfile()\n\n      if (this.resultProfileFetch.success) {\n        this.profile = { ...this.current }\n      }\n\n      this.isProfileFetching = false\n    },\n\n    async handleChangeProfile() {\n      const validate = await this.$validator.validateAll()\n\n      if (!validate) {\n        return\n      }\n\n      this.isChanging = true\n      const result = await this.changeProfile(this.profile)\n\n      if (result.success) {\n        this.profile = { ...this.current }\n        this.$validator.reset()\n        this.$toast.open({\n          type: 'success',\n          message: 'Sửa đổi thông tin thành công',\n        })\n      } else {\n        this.$toast.open({ type: 'error', message: result.message })\n      }\n\n      this.isChanging = false\n    },\n  },\n}\n",null]}