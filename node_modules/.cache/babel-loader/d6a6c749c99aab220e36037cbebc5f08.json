{"remainingRequest":"/home/tiendzung/workspace/lionnix/lionnix-seller-v2/node_modules/babel-loader/lib/index.js!/home/tiendzung/workspace/lionnix/lionnix-seller-v2/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/tiendzung/workspace/lionnix/lionnix-seller-v2/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/tiendzung/workspace/lionnix/lionnix-seller-v2/src/packages/container/views/components/ModalCreateOrAppendContainer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/tiendzung/workspace/lionnix/lionnix-seller-v2/src/packages/container/views/components/ModalCreateOrAppendContainer.vue","mtime":1603898990380},{"path":"/home/tiendzung/workspace/lionnix/lionnix-seller-v2/node_modules/cache-loader/dist/cjs.js","mtime":1601450297498},{"path":"/home/tiendzung/workspace/lionnix/lionnix-seller-v2/node_modules/babel-loader/lib/index.js","mtime":1597736171393},{"path":"/home/tiendzung/workspace/lionnix/lionnix-seller-v2/node_modules/cache-loader/dist/cjs.js","mtime":1601450297498},{"path":"/home/tiendzung/workspace/lionnix/lionnix-seller-v2/node_modules/vue-loader/lib/index.js","mtime":1597736282333}],"contextDependencies":[],"result":["import _regeneratorRuntime from \"/home/tiendzung/workspace/lionnix/lionnix-seller-v2/node_modules/@babel/runtime/regenerator\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { ORDER_STATUS_PENDING } from '@core/constants';\nexport default {\n  name: 'ModalCreateOrAppendContainer',\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    },\n    orders: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    containers: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n    fetchContainers: {\n      type: Function,\n      default: function _default() {}\n    },\n    shopId: {\n      type: Number,\n      default: 0\n    }\n  },\n  computed: {\n    availableOrders: function availableOrders() {\n      return this.orders.filter(function (_ref) {\n        var status = _ref.status;\n        return status === 'pending';\n      });\n    },\n    isHasInvalidOrders: function isHasInvalidOrders() {\n      return this.availableOrders.length < this.orders.length;\n    },\n    buttonText: function buttonText() {\n      return this.selectedContainer ? 'Gán vào delivery order' : 'Create';\n    }\n  },\n  data: function data() {\n    return {\n      isFetching: false,\n      selectedContainer: 0\n    };\n  },\n  mounted: function mounted() {\n    this.handleFetchContainers();\n  },\n  methods: {\n    handleClose: function handleClose() {\n      this.$emit('update:visible', false);\n    },\n    handleFetchContainers: function () {\n      var _handleFetchContainers = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var payload, result;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.isFetching = true;\n                payload = {\n                  status: ORDER_STATUS_PENDING,\n                  limit: 250\n                };\n                _context.next = 4;\n                return this.fetchContainers(payload);\n\n              case 4:\n                result = _context.sent;\n                this.isFetching = false;\n\n                if (!result.success) {\n                  this.$toast.open({\n                    type: 'error',\n                    message: result.message\n                  });\n                }\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function handleFetchContainers() {\n        return _handleFetchContainers.apply(this, arguments);\n      }\n\n      return handleFetchContainers;\n    }(),\n    handleSave: function handleSave() {\n      var ids = this.availableOrders.map(function (_ref2) {\n        var id = _ref2.id;\n        return id;\n      });\n      this.$emit('save', {\n        ids: ids,\n        containerId: this.selectedContainer\n      });\n    }\n  }\n};",{"version":3,"sources":["ModalCreateOrAppendContainer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0CA,SAAA,oBAAA,QAAA,iBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,8BADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA,KADA;AAKA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA,KALA;AASA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA;AAAA,eAAA,EAAA;AAAA;AAFA,KATA;AAaA,IAAA,UAAA,EAAA;AACA,MAAA,IAAA,EAAA,KADA;AAEA,MAAA,OAAA,EAAA;AAAA,eAAA,EAAA;AAAA;AAFA,KAbA;AAiBA,IAAA,eAAA,EAAA;AACA,MAAA,IAAA,EAAA,QADA;AAEA,MAAA,OAAA,EAAA,oBAAA,CAAA;AAFA,KAjBA;AAqBA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AArBA,GAFA;AA4BA,EAAA,QAAA,EAAA;AACA,IAAA,eADA,6BACA;AACA,aAAA,KAAA,MAAA,CAAA,MAAA,CAAA;AAAA,YAAA,MAAA,QAAA,MAAA;AAAA,eAAA,MAAA,KAAA,SAAA;AAAA,OAAA,CAAA;AACA,KAHA;AAIA,IAAA,kBAJA,gCAIA;AACA,aAAA,KAAA,eAAA,CAAA,MAAA,GAAA,KAAA,MAAA,CAAA,MAAA;AACA,KANA;AAOA,IAAA,UAPA,wBAOA;AACA,aAAA,KAAA,iBAAA,GAAA,wBAAA,GAAA,QAAA;AACA;AATA,GA5BA;AAuCA,EAAA,IAvCA,kBAuCA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,KADA;AAEA,MAAA,iBAAA,EAAA;AAFA,KAAA;AAIA,GA5CA;AA6CA,EAAA,OA7CA,qBA6CA;AACA,SAAA,qBAAA;AACA,GA/CA;AAgDA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA,WAAA,KAAA,CAAA,gBAAA,EAAA,KAAA;AACA,KAHA;AAKA,IAAA,qBALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA,qBAAA,UAAA,GAAA,IAAA;AACA,gBAAA,OAPA,GAOA;AACA,kBAAA,MAAA,EAAA,oBADA;AAEA,kBAAA,KAAA,EAAA;AAFA,iBAPA;AAAA;AAAA,uBAYA,KAAA,eAAA,CAAA,OAAA,CAZA;;AAAA;AAYA,gBAAA,MAZA;AAaA,qBAAA,UAAA,GAAA,KAAA;;AAEA,oBAAA,CAAA,MAAA,CAAA,OAAA,EAAA;AACA,uBAAA,MAAA,CAAA,IAAA,CAAA;AAAA,oBAAA,IAAA,EAAA,OAAA;AAAA,oBAAA,OAAA,EAAA,MAAA,CAAA;AAAA,mBAAA;AACA;;AAjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAoBA,IAAA,UApBA,wBAoBA;AACA,UAAA,GAAA,GAAA,KAAA,eAAA,CAAA,GAAA,CAAA;AAAA,YAAA,EAAA,SAAA,EAAA;AAAA,eAAA,EAAA;AAAA,OAAA,CAAA;AACA,WAAA,KAAA,CAAA,MAAA,EAAA;AACA,QAAA,GAAA,EAAA,GADA;AAEA,QAAA,WAAA,EAAA,KAAA;AAFA,OAAA;AAIA;AA1BA;AAhDA,CAAA","sourcesContent":["<template>\n  <p-modal\n    :active=\"visible\"\n    title=\"Tạo hoặc thêm đơn hàng vào delivery order\"\n    @close=\"handleClose\"\n  >\n    <p-alert\n      title=\"Bạn chỉ được chọn các đơn có trạng thái Pending\"\n      type=\"danger\"\n      v-if=\"isHasInvalidOrders\"\n    >\n    </p-alert>\n    <slot name=\"prepend\"></slot>\n    <div class=\"form-group\">\n      <label class=\"form-control-label\">\n        Bạn có muốn thêm đơn hàng vào delivery order đã được tạo trước đó?\n      </label>\n      <p-select v-model=\"selectedContainer\">\n        <option :value=\"0\">No</option>\n        <option v-for=\"(item, i) in containers\" :key=\"i\" :value=\"item.id\">\n          Order number: {{ item.ref_id }} - Ngày:\n          {{ item.created_at | datetime }}\n        </option>\n      </p-select>\n    </div>\n    <template slot=\"footer\">\n      <p-button type=\"default\" :disabled=\"loading\" @click=\"handleClose\">\n        Cancel\n      </p-button>\n      <p-button\n        type=\"primary\"\n        :loading=\"loading\"\n        :disabled=\"loading\"\n        @click.prevent=\"handleSave\"\n      >\n        {{ buttonText }}\n      </p-button>\n    </template>\n  </p-modal>\n</template>\n\n<script>\nimport { ORDER_STATUS_PENDING } from '@core/constants'\n\nexport default {\n  name: 'ModalCreateOrAppendContainer',\n  props: {\n    visible: {\n      type: Boolean,\n      default: false,\n    },\n    loading: {\n      type: Boolean,\n      default: false,\n    },\n    orders: {\n      type: Array,\n      default: () => [],\n    },\n    containers: {\n      type: Array,\n      default: () => [],\n    },\n    fetchContainers: {\n      type: Function,\n      default: () => {},\n    },\n    shopId: {\n      type: Number,\n      default: 0,\n    },\n  },\n  computed: {\n    availableOrders() {\n      return this.orders.filter(({ status }) => status === 'pending')\n    },\n    isHasInvalidOrders() {\n      return this.availableOrders.length < this.orders.length\n    },\n    buttonText() {\n      return this.selectedContainer ? 'Gán vào delivery order' : 'Create'\n    },\n  },\n  data() {\n    return {\n      isFetching: false,\n      selectedContainer: 0,\n    }\n  },\n  mounted() {\n    this.handleFetchContainers()\n  },\n  methods: {\n    handleClose() {\n      this.$emit('update:visible', false)\n    },\n\n    async handleFetchContainers() {\n      this.isFetching = true\n      const payload = {\n        status: ORDER_STATUS_PENDING,\n        limit: 250,\n      }\n\n      const result = await this.fetchContainers(payload)\n      this.isFetching = false\n\n      if (!result.success) {\n        this.$toast.open({ type: 'error', message: result.message })\n      }\n    },\n\n    handleSave() {\n      const ids = this.availableOrders.map(({ id }) => id)\n      this.$emit('save', {\n        ids,\n        containerId: this.selectedContainer,\n      })\n    },\n  },\n}\n</script>\n"],"sourceRoot":"src/packages/container/views/components"}]}