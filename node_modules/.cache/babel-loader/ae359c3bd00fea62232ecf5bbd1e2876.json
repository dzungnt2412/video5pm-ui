{"remainingRequest":"/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/babel-loader/lib/index.js!/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/tiendzung/workspace/video5pm/video5pm-ui/src/components/shared/Thumbnail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/tiendzung/workspace/video5pm/video5pm-ui/src/components/shared/Thumbnail.vue","mtime":1604479001981},{"path":"/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/cache-loader/dist/cjs.js","mtime":1604479000133},{"path":"/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/babel-loader/lib/index.js","mtime":1604479000077},{"path":"/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/cache-loader/dist/cjs.js","mtime":1604479000133},{"path":"/home/tiendzung/workspace/video5pm/video5pm-ui/node_modules/vue-loader/lib/index.js","mtime":1604479001773}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport api from '@/packages/design/api';\nexport default {\n  name: 'Thumbnail',\n  props: {\n    src: {\n      type: String,\n      default: ''\n    }\n  },\n  computed: {\n    thumbnail: function thumbnail() {\n      if (this.src) {\n        return this.getThumbnailUrl(this.src);\n      }\n\n      return this.src;\n    }\n  },\n  data: function data() {\n    return {\n      className: '',\n      image: '',\n      callAPi: false\n    };\n  },\n  methods: {\n    handleImageError: function handleImageError() {\n      var _this = this;\n\n      if (this.image === this.src) {\n        return;\n      }\n\n      var thumbnailDefault = \"\".concat(process.env.VUE_APP_ASSETS, \"/thumbnail.png\");\n\n      if (this.callAPi) {\n        this.image = thumbnailDefault;\n        return;\n      }\n\n      this.image = \"\".concat(process.env.VUE_APP_ASSETS, \"/image-processing.gif\");\n      this.className = 'miss-thumbnail';\n\n      if (this.src.startsWith('blob')) {\n        return;\n      }\n\n      api.missingThumbnail(this.src).then(function (response) {\n        _this.className = '';\n        _this.callAPi = true;\n\n        if (response && response.success) {\n          if (response.url.length) {\n            _this.image = response.url;\n          }\n\n          _this.image = thumbnailDefault;\n        }\n\n        _this.showNotify();\n      }).catch(this.showNotify);\n    },\n    showNotify: function showNotify() {\n      console.log('Miss thumbnail');\n    },\n    getThumbnailUrl: function getThumbnailUrl(src) {\n      return \"\".concat(process.env.VUE_APP_BASE_IMAGE_URL, \"/\").concat(src);\n    }\n  },\n  watch: {\n    src: {\n      handler: function handler(val) {\n        if (val) {\n          this.image = this.thumbnail;\n        }\n      },\n      immediate: true\n    }\n  }\n};",{"version":3,"sources":["Thumbnail.vue"],"names":[],"mappings":";;;;;;;;;;;;AAaA,OAAA,GAAA,MAAA,uBAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,GAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA;AADA,GAFA;AAQA,EAAA,QAAA,EAAA;AACA,IAAA,SADA,uBACA;AACA,UAAA,KAAA,GAAA,EAAA;AACA,eAAA,KAAA,eAAA,CAAA,KAAA,GAAA,CAAA;AACA;;AAEA,aAAA,KAAA,GAAA;AACA;AAPA,GARA;AAiBA,EAAA,IAjBA,kBAiBA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,EADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,OAAA,EAAA;AAHA,KAAA;AAKA,GAvBA;AAwBA,EAAA,OAAA,EAAA;AACA,IAAA,gBADA,8BACA;AAAA;;AACA,UAAA,KAAA,KAAA,KAAA,KAAA,GAAA,EAAA;AACA;AACA;;AAEA,UAAA,gBAAA,aAAA,OAAA,CAAA,GAAA,CAAA,cAAA,mBAAA;;AAEA,UAAA,KAAA,OAAA,EAAA;AACA,aAAA,KAAA,GAAA,gBAAA;AACA;AACA;;AAEA,WAAA,KAAA,aAAA,OAAA,CAAA,GAAA,CAAA,cAAA;AACA,WAAA,SAAA,GAAA,gBAAA;;AAEA,UAAA,KAAA,GAAA,CAAA,UAAA,CAAA,MAAA,CAAA,EAAA;AACA;AACA;;AAEA,MAAA,GAAA,CACA,gBADA,CACA,KAAA,GADA,EAEA,IAFA,CAEA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,SAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,OAAA,GAAA,IAAA;;AACA,YAAA,QAAA,IAAA,QAAA,CAAA,OAAA,EAAA;AACA,cAAA,QAAA,CAAA,GAAA,CAAA,MAAA,EAAA;AACA,YAAA,KAAA,CAAA,KAAA,GAAA,QAAA,CAAA,GAAA;AACA;;AACA,UAAA,KAAA,CAAA,KAAA,GAAA,gBAAA;AACA;;AACA,QAAA,KAAA,CAAA,UAAA;AACA,OAZA,EAaA,KAbA,CAaA,KAAA,UAbA;AAcA,KAlCA;AAoCA,IAAA,UApCA,wBAoCA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,gBAAA;AACA,KAtCA;AAwCA,IAAA,eAxCA,2BAwCA,GAxCA,EAwCA;AACA,uBAAA,OAAA,CAAA,GAAA,CAAA,sBAAA,cAAA,GAAA;AACA;AA1CA,GAxBA;AAoEA,EAAA,KAAA,EAAA;AACA,IAAA,GAAA,EAAA;AACA,MAAA,OADA,mBACA,GADA,EACA;AACA,YAAA,GAAA,EAAA;AACA,eAAA,KAAA,GAAA,KAAA,SAAA;AACA;AACA,OALA;AAMA,MAAA,SAAA,EAAA;AANA;AADA;AApEA,CAAA","sourcesContent":["<template>\n  <img\n    :src=\"image\"\n    :data-src=\"src\"\n    :class=\"className\"\n    v-if=\"image\"\n    alt=\"Thumbnail\"\n    @error=\"handleImageError\"\n    v-bind=\"$attrs\"\n  />\n</template>\n\n<script>\nimport api from '@/packages/design/api'\nexport default {\n  name: 'Thumbnail',\n  props: {\n    src: {\n      type: String,\n      default: '',\n    },\n  },\n  computed: {\n    thumbnail() {\n      if (this.src) {\n        return this.getThumbnailUrl(this.src)\n      }\n\n      return this.src\n    },\n  },\n  data() {\n    return {\n      className: '',\n      image: '',\n      callAPi: false,\n    }\n  },\n  methods: {\n    handleImageError() {\n      if (this.image === this.src) {\n        return\n      }\n\n      const thumbnailDefault = `${process.env.VUE_APP_ASSETS}/thumbnail.png`\n\n      if (this.callAPi) {\n        this.image = thumbnailDefault\n        return\n      }\n\n      this.image = `${process.env.VUE_APP_ASSETS}/image-processing.gif`\n      this.className = 'miss-thumbnail'\n\n      if (this.src.startsWith('blob')) {\n        return\n      }\n\n      api\n        .missingThumbnail(this.src)\n        .then((response) => {\n          this.className = ''\n          this.callAPi = true\n          if (response && response.success) {\n            if (response.url.length) {\n              this.image = response.url\n            }\n            this.image = thumbnailDefault\n          }\n          this.showNotify()\n        })\n        .catch(this.showNotify)\n    },\n\n    showNotify() {\n      console.log('Miss thumbnail')\n    },\n\n    getThumbnailUrl(src) {\n      return `${process.env.VUE_APP_BASE_IMAGE_URL}/${src}`\n    },\n  },\n  watch: {\n    src: {\n      handler(val) {\n        if (val) {\n          this.image = this.thumbnail\n        }\n      },\n      immediate: true,\n    },\n  },\n}\n</script>\n"],"sourceRoot":"src/components/shared"}]}